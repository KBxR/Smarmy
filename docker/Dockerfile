FROM node:14

# Create app directory
WORKDIR /usr/src/app

# Install app dependencies
COPY package*.json ./

RUN npm install

# Bundle app source
COPY . .

# Set environment variables
ARG BOT_TOKEN
ARG CLIENT_ID
ARG GUILD_ID
ARG ADMIN_ID
ARG DATABASE_URL
ARG PIN_SERVER
ARG PIN_CHANNEL
ARG LASTFM_KEY
ARG LASTFM_SECRET
ARG REBRICK_KEY

ENV BOT_TOKEN=$BOT_TOKEN
ENV CLIENT_ID=$CLIENT_ID
ENV GUILD_ID=$GUILD_ID
ENV ADMIN_ID=$ADMIN_ID
ENV DATABASE_URL=$DATABASE_URL
ENV PIN_SERVER=$PIN_SERVER
ENV PIN_CHANNEL=$PIN_CHANNEL
ENV LASTFM_KEY=$LASTFM_KEY
ENV LASTFM_SECRET=$LASTFM_SECRET
ENV REBRICK_KEY=$REBRICK_KEY

CMD ["node", "bot.js"]